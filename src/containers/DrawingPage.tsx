import React, {useRef} from 'react';
import {Alert, PermissionsAndroid, StyleSheet, View} from 'react-native';
import SignatureScreen, {SignatureViewRef} from 'react-native-signature-canvas';
import RNFS from 'react-native-fs';
import RNFetchBlob from 'rn-fetch-blob';
import CameraRoll from '@react-native-community/cameraroll';
import ContainerHeader from '../components/ContainerHeader';
import {Colors} from '../styles/Colors';
import Button from '../components/Button';
import {IS_IOS} from '../utils/Constants';
import I18n from '../config/I18n';
import {testProperties} from '../config/TestProperties';

const DrawingPage = () => {
  const signatureRef = useRef<SignatureViewRef>(null);
  const webStyle = `
html,body {
	background: ${Colors.white};
	height: 100%;
}
.m-signature-pad {
	box-shadow: none;
	border: none;
}
.m-signature-pad--body::before {
	content: '';
	background-image: url("data:image/png;base64,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");
	background-repeat:no-repeat;
	background-position: center center;
	background-size: contain;
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	margin-left: 15px;
	margin-right: 15px;
}

.m-signature-pad--body {
	background: ${Colors.lightRed};
	border-radius: 5px;
}
.m-signature-pad--footer .button,
.m-signature-pad--footer .description{
	display: none;
}
`;
  const clear = () => signatureRef.current?.clearSignature();
  const save = () => signatureRef.current?.readSignature();
  const notification = (title: string, message: string) => {
    Alert.alert(title, message, [{text: 'OK'}]);
  };
  const getPermissionAndroid = async () => {
    try {
      const granted = await PermissionsAndroid.request(
        PermissionsAndroid.PERMISSIONS.WRITE_EXTERNAL_STORAGE,
        {
          title: I18n.t('drawing.downloadPermissionsTitle'),
          message: I18n.t('drawing.downloadPermissionsRequiredMessage'),
          buttonNegative: I18n.t('drawing.cancel'),
          buttonPositive: I18n.t('drawing.ok'),
        },
      );

      if (granted === PermissionsAndroid.RESULTS.GRANTED) {
        return true;
      }

      notification(
        I18n.t('drawing.saveDrawing'),
        I18n.t('drawing.downloadPermissionsRequiredMessage'),
      );
    } catch (err) {
      notification(
        I18n.t('drawing.saveDrawing'),
        `${I18n.t('drawing.failedSave')}: ${err.message}`,
      );
    }
  };
  const handleDrawing = async (base64String: string) => {
    if (!IS_IOS) {
      try {
        const granted = await getPermissionAndroid();
        if (!granted) {
          return;
        }
      } catch (error) {
        notification(
          I18n.t('drawing.androidPermissions'),
          `${I18n.t('drawing.androidPermissionsFailed')}: ${error.message}`,
        );

        return;
      }
    }
    const image = base64String.replace('data:image/png;base64,', '');
    const dirs = IS_IOS
      ? RNFS.LibraryDirectoryPath
      : RNFS.ExternalDirectoryPath;
    const downloadDest = `${dirs}/${Math.random() * 10000000 || 0}.png`;

    try {
      await RNFetchBlob.fs.writeFile(downloadDest, image, 'base64');
      const imageSaved = await CameraRoll.save(downloadDest, {type: 'photo'});
      if (imageSaved) {
        notification(
          I18n.t('drawing.saveDrawing'),
          I18n.t('drawing.savedGallery'),
        );
      }
    } catch (error) {
      notification(
        I18n.t('drawing.saveDrawing'),
        `${I18n.t('drawing.failedSave')}: ${error.message}`,
      );
    }
  };

  return (
    <View
      style={styles.container}
      {...testProperties(I18n.t('drawing.testId'))}>
      <View style={styles.content}>
        <ContainerHeader
          title={I18n.t('drawing.header')}
          containerStyle={styles.containerHeader}
        />
        <SignatureScreen
          ref={signatureRef}
          onOK={img => handleDrawing(img)}
          penColor={Colors.slRed}
          // String, webview style for overwrite default style, all style:
          // https://github.com/YanYuanFE/react-native-signature-canvas/blob/master/h5/css/signature-pad.css
          webStyle={webStyle}
        />
        <View style={styles.buttonContainer}>
          <Button
            onPress={clear}
            title={I18n.t('drawing.clear')}
            testId={I18n.t('drawing.clear')}
          />
          <View style={styles.horizontalDivider} />
          <Button
            onPress={save}
            title={I18n.t('drawing.save')}
            testId={I18n.t('drawing.save')}
          />
        </View>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    backgroundColor: Colors.white,
    flex: 1,
  },
  containerHeader: {
    paddingLeft: 0,
    paddingRight: 20,
    paddingBottom: 32,
    paddingTop: 0,
    flex: 0,
  },
  content: {
    padding: 20,
    flex: 1,
  },
  buttonContainer: {
    flexDirection: 'row',
    marginTop: 24,
  },
  horizontalDivider: {
    width: 32,
  },
});

export default DrawingPage;
